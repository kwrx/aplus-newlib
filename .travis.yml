language: c
os: linux
dist: bionic

jobs:
  include:
    - os: linux
      env:
        - HOST="x86_64"
    - os: linux
      env:
        - HOST="i686"

script:
  ci/build.sh ${HOST}

install:
  ci/install.sh



before_deploy:
  - git config --local user.name "Antonino Natale"
  - git config --local user.email "antonio.natale97@hotmail.com"
  - export TRAVIS_TAG=v0.6.$(date +'%Y%m%d')
  - git tag $TRAVIS_TAG

deploy:
  provider: releases
  api_key:
    secure: muHFi9mVl3liU//rTMm2ObcA8G/fmLNMlTDOwfc4TZGa4B3yuy4DZ/HBs57HrmvbwyKfWUlxTjXsj4wqscHpN6z2qbfPXVdBDn3eJqeSy1JWuBzIPWzLiLOZ5wVG8gLwMk9FfHDZnzSebTmAagVUjX2WRMS97z/TNyKpxKFeOJNBICYNVoCZz0hH6a8Dlh9u0P5c3EQDJnJktW+0cQirGRNTm+WFRBJBlMlfBPnsm/hLxOPFL3g0FoQLjxHiNM8CxviADbsIGAkQbO9B7FMVHBuJ5WUnE0sttL/zKqTysf911P5ctGpbbE7p+QsRT8qjwwES98oARTbLzFAagZBzgaCG/B1tdI3YPFuH6DmPtl59HwPGfSC4jYqeMLHI4QJjhbduGDTdsaC5Fcq/lqReRMr/GN/GucJJmri0ASA6ihMQz+mUwnaEvKjNip6kEzBlTKcklT5U8r9D6XOKmEN9o5JZ6yW7MIAEXm89ocmiM3zOE4lDHaq1vlzEL5jLL+YspInXW2IUBOupghfTIJTL+2qUeHVXykX6TU1G6C/JrdiOiX2qnrMUXYgsNq/VitVZh/eHzI5v/cdqkswORFKeFK7cfS4JUBMLLFXjneuox+IhspLklEWzPaxeVu5/wC2M4zaYj9+v6BsZHB2F7UYwTlT+Z/ylFOymLEUo6NhcY88=
    
  file:
    ${HOST}-aplus-newlib.tar.xz

  skip_cleanup: true
  overwrite: true
  draft: false

  on:
    repo: kwrx/aplus-newlib
    tags: false
