language: generic

matrix:
  include:
    - os: linux
      env:
        - HOST="x86_64"
    - os: linux
      env:
        - HOST="i686"

script:
  ci/build.sh ${HOST}

install:
  ci/install.sh



before_deploy:
  - git config --local user.name "Antonino Natale"
  - git config --local user.email "antonio.natale97@hotmail.com"
  - export TRAVIS_TAG=v0.6.$(date +'%Y%m%d')
  - git tag $TRAVIS_TAG

deploy:
  provider: releases
  api_key:
    secure: M9Ocfm9/nFBpjBI7k5NSn/BmnCrdDTEfGj9XgKDLgdQCiWWbxnR5hnaFaeFmOCbNYpmZftudRX6osZpgbOsaxkZxGjchfNW9hYVHeJiFIoGvi+dXyDJIpnl3eQoQDhn5PQy1qOBvjBVOYTdKWCGBf3ApGtRMKklaeHzpOzukVwUJCqrgwLtE1R266XQ24djQHfUiZqIsHL1GWdWzYNT7CN2zRZeICROrGUsz8TiUoUwRn2VAxl/GDlNFaGHXfde4I1vfN3YstyJXHvCN/EEIBpEVDa8I/d3hAodh1uUUv70KImOMWPynHkv1PderGCHBtG2+3Q5ojvtAOtilx58atlDNtkR6s1ngnPDbgNTfFSzf5KvVEfOLJO+djKLMxxfL02GZF1VvB4ShftPP4Em+rMt/XolRg8B2EyRFQ9sGY2VliQmGoDKcpCn+MfQKVQe1oOBvVIINUbGNpw5NGWX5UE0ornSuG+ZzGD0EuvjugSXBfOEQlPvpDpNY9WCiEwpIrqpOfC/NbDjer/rlVg2Phwvu3GVNdpIw7xRWvmUOvzBX+avv7WT9/Fdf3TBwfkAxxfOwhJshrI22udRYf4SePJp3e+mQpZiA+qlfYsZdtyZcOfAVTeYHLa+3V1jnOOscpz3XyksZFcyNu1a6nZ6pfGz9W4RMBgwlDqOKpBJ4Wmw=
         
  file:
    ${HOST}-aplus-newlib.tar.xz

  skip_cleanup: true
  overwrite: true
  draft: false

  on:
    repo: kwrx/aplus-newlib
    tags: false
